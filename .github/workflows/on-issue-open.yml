name: Open Issue Workflow

on:
  issues:
    types: [opened, edited]

jobs:
  assign_issues_to_backlog:
    name: Assign New Issue to Backlog
    runs-on: ubuntu-latest
    steps:
      - uses: technote-space/create-project-card-action@v1
        with:
          PROJECT: Backlog
          COLUMN: Triage

  autolable_issues:
    name: Apply Labels to New Issue
    runs-on: ubuntu-latest
    steps:
      - uses: Naturalclar/issue-action@v2.0.2
        with:
          title-or-body: "both"
          parameters: '[ {"keywords": ["[X] Build"], "labels": ["type: build"], "assignees": [""]},
                         {"keywords": ["[X] CI/CD"], "labels": ["type: ci"], "assignees": [""]},
                         {"keywords": ["[X] Documentation"], "labels": ["type: docs"], "assignees": [""]},
                         {"keywords": ["[X] Feature"], "labels": ["type: feature"], "assignees": [""]},
                         {"keywords": ["[X] Fix"], "labels": ["type: fix"], "assignees": [""]},
                         {"keywords": ["[X] Refactor"], "labels": ["type: refactor"], "assignees": [""]},
                         {"keywords": ["[X] Style"], "labels": ["type: style"], "assignees": [""]},
                         {"keywords": ["[X] Test"], "labels": ["type: test"], "assignees": [""]},
                         {"keywords": ["[X] Major"], "labels": ["bump: major"], "assignees": [""]},
                         {"keywords": ["[X] Minor"], "labels": ["bump: minor"], "assignees": [""]},
                         {"keywords": ["[X] Patch"], "labels": ["bump: patch"], "assignees": [""]},
                         {"keywords": ["[X] EPIC"], "labels": ["EPIC!!"], "assignees": [""]},
                         {"keywords": ["[X] Issue Branch"], "labels": ["dobranch"], "assignees": [""]} ]'
          github-token: "${{ secrets.GITHUB_TOKEN }}"
