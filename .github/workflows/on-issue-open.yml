name: Open Issue Workflow

on:
  issues:
    types: [opened]

jobs:
  assign_issues_to_backlog:
    name: Assign New Issue to Backlog
    runs-on: ubuntu-latest
    steps:
      - uses: technote-space/create-project-card-action@v1
        with:
          PROJECT: Backlog
          COLUMN: Triage

  autolable_issues:
    name: Apply Labels to New Issue
    runs-on: ubuntu-latest
    steps:
      - uses: Naturalclar/issue-action@v2.0.2
        with:
          title-or-body: "both"
          parameters: '[ {"keywords": ["type: build", "type: tool"], "labels": ["type: build"], "assignees": [""]},
                         {"keywords": ["type: ci"], "labels": ["type: ci"], "assignees": [""]},
                         {"keywords": ["type: docs", "type: documentation"], "labels": ["type: docs"], "assignees": [""]},
                         {"keywords": ["type: feature", "type: feat"], "labels": ["type: feature"], "assignees": [""]},
                         {"keywords": ["type: fix", "type: bugfix", "type: hotfix"], "labels": ["type: fix"], "assignees": [""]},
                         {"keywords": ["type: refactor"], "labels": ["type: refactor"], "assignees": [""]},
                         {"keywords": ["type: style"], "labels": ["type: style"], "assignees": [""]},
                         {"keywords": ["type: test", "type: tests"], "labels": ["type: test"], "assignees": [""]},
                         {"keywords": ["dobranch"], "labels": ["dobranch"], "assignees": [""]} ]'
          github-token: "${{ secrets.GITHUB_TOKEN }}"
