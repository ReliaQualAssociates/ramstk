<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>ramstk.dao.DAO &#8212; RAMSTK 2.0.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/sidebar.js"></script>
    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="../../../_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    

  </head><body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="../../../index.html">RAMSTK 2.0.0 documentation</a> &#187;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for ramstk.dao.DAO</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#</span>
<span class="c1">#       ramstk.dao.DAO.py is part of The RAMSTK Project</span>
<span class="c1">#</span>
<span class="c1"># All rights reserved.</span>
<span class="c1"># Copyright 2007 - 2017 Doyle Rowland doyle.rowland &lt;AT&gt; reliaqual &lt;DOT&gt; com</span>
<span class="sd">&quot;&quot;&quot;Data Access Object (DAO) Package.&quot;&quot;&quot;</span>

<span class="c1"># Standard Library Imports</span>
<span class="kn">import</span> <span class="nn">gettext</span>

<span class="c1"># Third Party Imports</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">exc</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="k">import</span> <span class="n">scoped_session</span><span class="p">,</span> <span class="n">sessionmaker</span>

<span class="c1"># RAMSTK Local Imports</span>
<span class="kn">from</span> <span class="nn">.commondb</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">RAMSTKRPN</span><span class="p">,</span> <span class="n">RAMSTKCategory</span><span class="p">,</span> <span class="n">RAMSTKCondition</span><span class="p">,</span> <span class="n">RAMSTKFailureMode</span><span class="p">,</span> <span class="n">RAMSTKGroup</span><span class="p">,</span>
    <span class="n">RAMSTKHazards</span><span class="p">,</span> <span class="n">RAMSTKLoadHistory</span><span class="p">,</span> <span class="n">RAMSTKManufacturer</span><span class="p">,</span> <span class="n">RAMSTKMeasurement</span><span class="p">,</span>
    <span class="n">RAMSTKMethod</span><span class="p">,</span> <span class="n">RAMSTKModel</span><span class="p">,</span> <span class="n">RAMSTKSiteInfo</span><span class="p">,</span> <span class="n">RAMSTKStakeholders</span><span class="p">,</span>
    <span class="n">RAMSTKStatus</span><span class="p">,</span> <span class="n">RAMSTKSubCategory</span><span class="p">,</span> <span class="n">RAMSTKType</span><span class="p">,</span> <span class="n">RAMSTKUser</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.programdb</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">RAMSTKNSWC</span><span class="p">,</span> <span class="n">RAMSTKAction</span><span class="p">,</span> <span class="n">RAMSTKAllocation</span><span class="p">,</span> <span class="n">RAMSTKCause</span><span class="p">,</span> <span class="n">RAMSTKControl</span><span class="p">,</span>
    <span class="n">RAMSTKDesignElectric</span><span class="p">,</span> <span class="n">RAMSTKDesignMechanic</span><span class="p">,</span> <span class="n">RAMSTKEnvironment</span><span class="p">,</span>
    <span class="n">RAMSTKFailureDefinition</span><span class="p">,</span> <span class="n">RAMSTKFunction</span><span class="p">,</span> <span class="n">RAMSTKGrowthTest</span><span class="p">,</span> <span class="n">RAMSTKHardware</span><span class="p">,</span>
    <span class="n">RAMSTKHazardAnalysis</span><span class="p">,</span> <span class="n">RAMSTKIncident</span><span class="p">,</span> <span class="n">RAMSTKIncidentAction</span><span class="p">,</span>
    <span class="n">RAMSTKIncidentDetail</span><span class="p">,</span> <span class="n">RAMSTKMatrix</span><span class="p">,</span> <span class="n">RAMSTKMechanism</span><span class="p">,</span> <span class="n">RAMSTKMilHdbkF</span><span class="p">,</span>
    <span class="n">RAMSTKMission</span><span class="p">,</span> <span class="n">RAMSTKMissionPhase</span><span class="p">,</span> <span class="n">RAMSTKMode</span><span class="p">,</span> <span class="n">RAMSTKOpLoad</span><span class="p">,</span>
    <span class="n">RAMSTKOpStress</span><span class="p">,</span> <span class="n">RAMSTKProgramInfo</span><span class="p">,</span> <span class="n">RAMSTKProgramStatus</span><span class="p">,</span> <span class="n">RAMSTKReliability</span><span class="p">,</span>
    <span class="n">RAMSTKRequirement</span><span class="p">,</span> <span class="n">RAMSTKRevision</span><span class="p">,</span> <span class="n">RAMSTKSimilarItem</span><span class="p">,</span> <span class="n">RAMSTKSoftware</span><span class="p">,</span>
    <span class="n">RAMSTKSoftwareDevelopment</span><span class="p">,</span> <span class="n">RAMSTKSoftwareReview</span><span class="p">,</span> <span class="n">RAMSTKSoftwareTest</span><span class="p">,</span>
    <span class="n">RAMSTKStakeholder</span><span class="p">,</span> <span class="n">RAMSTKSurvival</span><span class="p">,</span> <span class="n">RAMSTKSurvivalData</span><span class="p">,</span> <span class="n">RAMSTKTest</span><span class="p">,</span>
    <span class="n">RAMSTKTestMethod</span><span class="p">,</span> <span class="n">RAMSTKUnits</span><span class="p">,</span> <span class="n">RAMSTKValidation</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.RAMSTKCommonDB</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">RAMSTK_CATEGORIES</span><span class="p">,</span> <span class="n">RAMSTK_CONDITIONS</span><span class="p">,</span> <span class="n">RAMSTK_FAILURE_MODES</span><span class="p">,</span>
    <span class="n">RAMSTK_GROUPS</span><span class="p">,</span> <span class="n">RAMSTK_HAZARDS</span><span class="p">,</span> <span class="n">RAMSTK_HISTORIES</span><span class="p">,</span> <span class="n">RAMSTK_MANUFACTURERS</span><span class="p">,</span>
    <span class="n">RAMSTK_MEASUREMENTS</span><span class="p">,</span> <span class="n">RAMSTK_METHODS</span><span class="p">,</span> <span class="n">RAMSTK_MODELS</span><span class="p">,</span> <span class="n">RAMSTK_RPNS</span><span class="p">,</span>
    <span class="n">RAMSTK_STAKEHOLDERS</span><span class="p">,</span> <span class="n">RAMSTK_STATUSES</span><span class="p">,</span> <span class="n">RAMSTK_SUBCATEGORIES</span><span class="p">,</span> <span class="n">RAMSTK_TYPES</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Add localization support.</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">gettext</span><span class="o">.</span><span class="n">gettext</span>


<span class="c1"># pylint: disable=too-many-locals</span>
<div class="viewcode-block" id="do_create_common_db"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.do_create_common_db">[docs]</a><span class="k">def</span> <span class="nf">do_create_common_db</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create and populate the RAMSTK Common database.&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">os</span>
    <span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">timedelta</span>

    <span class="n">__test</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;database&#39;</span><span class="p">]</span>

    <span class="n">_cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">license_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">_cwd</span> <span class="o">+</span> <span class="s1">&#39;/license.key&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">_license_key</span> <span class="o">=</span> <span class="n">license_file</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_expire_date</span> <span class="o">=</span> <span class="n">license_file</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">license_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="n">_license_key</span> <span class="o">=</span> <span class="s1">&#39;0000&#39;</span>
        <span class="n">_expire_date</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

    <span class="c1"># Create and populate the RAMSTK Common test database.</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">scoped_session</span><span class="p">(</span><span class="n">sessionmaker</span><span class="p">())</span>

    <span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span> <span class="n">autoflush</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">do_make_commondb_tables</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

    <span class="c1"># Add the product key and expiration date to the site info table.</span>
    <span class="n">_site_info</span> <span class="o">=</span> <span class="n">RAMSTKSiteInfo</span><span class="p">()</span>
    <span class="n">_site_info</span><span class="o">.</span><span class="n">product_key</span> <span class="o">=</span> <span class="n">_license_key</span>
    <span class="n">_site_info</span><span class="o">.</span><span class="n">expire_on</span> <span class="o">=</span> <span class="n">_expire_date</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_site_info</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_CATEGORIES</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKCategory</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">cat_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">harsh_ir_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">mild_ir_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">harsh_pr_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">mild_pr_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">harsh_vr_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">mild_vr_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">harsh_deltat_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">mild_deltat_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">harsh_maxt_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">mild_maxt_limit</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">RAMSTK_SUBCATEGORIES</span><span class="p">):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKSubCategory</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">category_id</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Default failure modes.</span>
    <span class="k">for</span> <span class="n">_ckey</span> <span class="ow">in</span> <span class="n">RAMSTK_FAILURE_MODES</span><span class="p">:</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKFailureMode</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">category_id</span> <span class="o">=</span> <span class="n">_ckey</span>
        <span class="k">for</span> <span class="n">_skey</span> <span class="ow">in</span> <span class="n">RAMSTK_FAILURE_MODES</span><span class="p">[</span><span class="n">_ckey</span><span class="p">]:</span>
            <span class="n">_record</span><span class="o">.</span><span class="n">subcategory_id</span> <span class="o">=</span> <span class="n">_skey</span>
            <span class="k">for</span> <span class="n">_mkey</span> <span class="ow">in</span> <span class="n">RAMSTK_FAILURE_MODES</span><span class="p">[</span><span class="n">_ckey</span><span class="p">][</span><span class="n">_skey</span><span class="p">]:</span>
                <span class="n">_record</span><span class="o">.</span><span class="n">mode_id</span> <span class="o">=</span> <span class="n">_mkey</span>
                <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">RAMSTK_FAILURE_MODES</span><span class="p">[</span><span class="n">_ckey</span><span class="p">][</span><span class="n">_skey</span><span class="p">][</span>
                    <span class="n">_mkey</span>
                <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">_record</span><span class="o">.</span><span class="n">mode_ratio</span> <span class="o">=</span> <span class="n">RAMSTK_FAILURE_MODES</span><span class="p">[</span><span class="n">_ckey</span><span class="p">][</span><span class="n">_skey</span><span class="p">][</span><span class="n">_mkey</span><span class="p">][</span>
                    <span class="mi">1</span>
                <span class="p">]</span>
                <span class="n">_record</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">RAMSTK_FAILURE_MODES</span><span class="p">[</span><span class="n">_ckey</span><span class="p">][</span><span class="n">_skey</span><span class="p">][</span><span class="n">_mkey</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Environmental conditions, operating conditions and load histories for</span>
    <span class="c1"># PoF analysis.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_CONDITIONS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKCondition</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">cond_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_HISTORIES</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKLoadHistory</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Workgroups and affinity groups.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_GROUPS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKGroup</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">group_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Hazards for hazard analysis.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_HAZARDS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKHazards</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">subcategory</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Manufacturers.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_MANUFACTURERS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKManufacturer</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">cage_code</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Units of measure, damage measurements.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_MEASUREMENTS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKMeasurement</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">measurement_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Detection methods for incident reports.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_METHODS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKMethod</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">method_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Damage models.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_MODELS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKModel</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">model_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># This table needs to be moved to the RAMSTK Program database.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_RPNS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKRPN</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">rpn_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Stakeholders.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_STAKEHOLDERS</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKStakeholders</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">stakeholder</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Action and incident statuses.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_STATUSES</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKStatus</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">status_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="c1"># Incident, requirement, and validation types.</span>
    <span class="k">for</span> <span class="n">__</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">RAMSTK_TYPES</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKType</span><span class="p">()</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_record</span><span class="o">.</span><span class="n">type_type</span> <span class="o">=</span> <span class="n">_value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="n">_user</span> <span class="o">=</span> <span class="n">RAMSTKUser</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">__test</span><span class="p">:</span>
        <span class="n">_yn</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
            <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Would you like to add a RAMSTK Administrator? ([y]/n): &quot;</span><span class="p">),</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;y&#39;</span>

        <span class="k">if</span> <span class="n">_yn</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
            <span class="n">_user</span><span class="o">.</span><span class="n">user_lname</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
                <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Enter the RAMSTK Administrator&#39;s last name (surname): &quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">_user</span><span class="o">.</span><span class="n">user_fname</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
                <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Enter the RAMSTK Administrator&#39;s first name (given name): &quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">_user</span><span class="o">.</span><span class="n">user_email</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
                <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Enter the RAMSTK Administrator&#39;s e-mail address: &quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">_user</span><span class="o">.</span><span class="n">user_phone</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
                <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Enter the RAMSTK Administrator&#39;s phone number: &quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">_user</span><span class="o">.</span><span class="n">user_group_id</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_user</span><span class="o">.</span><span class="n">user_lname</span> <span class="o">=</span> <span class="s1">&#39;Tester&#39;</span>
        <span class="n">_user</span><span class="o">.</span><span class="n">user_fname</span> <span class="o">=</span> <span class="s1">&#39;Johnny&#39;</span>
        <span class="n">_user</span><span class="o">.</span><span class="n">user_email</span> <span class="o">=</span> <span class="s1">&#39;tester.johnny@reliaqual.com&#39;</span>
        <span class="n">_user</span><span class="o">.</span><span class="n">user_phone</span> <span class="o">=</span> <span class="s1">&#39;+1.269.867.5309&#39;</span>
        <span class="n">_user</span><span class="o">.</span><span class="n">user_group_id</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_user</span><span class="p">)</span>

    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<div class="viewcode-block" id="do_create_program_db"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.do_create_program_db">[docs]</a><span class="k">def</span> <span class="nf">do_create_program_db</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create and initialize a RAMSTK Program database.&quot;&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;database&#39;</span><span class="p">]</span>

    <span class="c1"># Create and populate the RAMSTK Program test database.</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">scoped_session</span><span class="p">(</span><span class="n">sessionmaker</span><span class="p">())</span>

    <span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span> <span class="n">autoflush</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Create all the tables in the RAMSTK Program database.</span>
    <span class="n">do_make_programdb_tables</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

    <span class="c1"># Add an entry for the Program Information.</span>
    <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKProgramInfo</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="n">_revision</span> <span class="o">=</span> <span class="n">RAMSTKRevision</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_revision</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_mission</span> <span class="o">=</span> <span class="n">RAMSTKMission</span><span class="p">()</span>
    <span class="n">_mission</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_mission</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_record</span> <span class="o">=</span> <span class="n">RAMSTKProgramStatus</span><span class="p">()</span>
    <span class="n">_record</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_record</span><span class="p">)</span>

    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<span class="c1"># pylint: disable=too-many-statements, too-many-locals</span>
<div class="viewcode-block" id="do_create_test_database"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.do_create_test_database">[docs]</a><span class="k">def</span> <span class="nf">do_create_test_database</span><span class="p">(</span><span class="n">database</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a new RAMSTK Program test database.</span>

<span class="sd">    :param str database: the RFC1738 URL path to the database to connect</span>
<span class="sd">                         with.</span>
<span class="sd">    :return: False if successful or True if an error occurs.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create and populate the RAMSTK Program test database.</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">database</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">scoped_session</span><span class="p">(</span><span class="n">sessionmaker</span><span class="p">())</span>

    <span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span> <span class="n">autoflush</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Create all the tables in the RAMSTK Program database.</span>
    <span class="n">do_make_programdb_tables</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

    <span class="n">_program_info</span> <span class="o">=</span> <span class="n">RAMSTKProgramInfo</span><span class="p">()</span>
    <span class="n">_program_info</span><span class="o">.</span><span class="n">revision_prefix</span> <span class="o">=</span> <span class="s2">&quot;REV&quot;</span>
    <span class="n">_program_info</span><span class="o">.</span><span class="n">revision_next_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_program_info</span><span class="p">)</span>

    <span class="n">_revision</span> <span class="o">=</span> <span class="n">RAMSTKRevision</span><span class="p">()</span>
    <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">_revision</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Test Revision&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_revision</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_definition</span> <span class="o">=</span> <span class="n">RAMSTKFailureDefinition</span><span class="p">()</span>
    <span class="n">_definition</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_definition</span><span class="o">.</span><span class="n">definition</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;Failure Definition&#39;</span>

    <span class="n">_mission</span> <span class="o">=</span> <span class="n">RAMSTKMission</span><span class="p">()</span>
    <span class="n">_mission</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_mission</span><span class="o">.</span><span class="n">mission_id</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">_mission</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;Test Mission&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_definition</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_mission</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_phase</span> <span class="o">=</span> <span class="n">RAMSTKMissionPhase</span><span class="p">()</span>
    <span class="n">_phase</span><span class="o">.</span><span class="n">mission_id</span> <span class="o">=</span> <span class="n">_mission</span><span class="o">.</span><span class="n">mission_id</span>
    <span class="n">_phase</span><span class="o">.</span><span class="n">phase_id</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">_phase</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;Test Mission Phase 1&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_phase</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_environment</span> <span class="o">=</span> <span class="n">RAMSTKEnvironment</span><span class="p">()</span>
    <span class="n">_environment</span><span class="o">.</span><span class="n">phase_id</span> <span class="o">=</span> <span class="n">_phase</span><span class="o">.</span><span class="n">phase_id</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_environment</span><span class="p">)</span>

    <span class="n">_program_status</span> <span class="o">=</span> <span class="n">RAMSTKProgramStatus</span><span class="p">()</span>
    <span class="n">_program_status</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_program_status</span><span class="p">)</span>

    <span class="n">_dic_rows</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
        <span class="n">_function</span> <span class="o">=</span> <span class="n">RAMSTKFunction</span><span class="p">()</span>
        <span class="n">_function</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_function</span><span class="o">.</span><span class="n">function_code</span> <span class="o">=</span> <span class="s2">&quot;FUNC-000</span><span class="si">{0:d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_function</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="n">_mode</span> <span class="o">=</span> <span class="n">RAMSTKMode</span><span class="p">()</span>
        <span class="n">_mode</span><span class="o">.</span><span class="n">function_id</span> <span class="o">=</span> <span class="n">_function</span><span class="o">.</span><span class="n">function_id</span>
        <span class="n">_mode</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">_mode</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Test Functional Failure Mode #</span><span class="si">{0:d}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_mode</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="n">_cause</span> <span class="o">=</span> <span class="n">RAMSTKCause</span><span class="p">()</span>
        <span class="n">_cause</span><span class="o">.</span><span class="n">mode_id</span> <span class="o">=</span> <span class="n">_mode</span><span class="o">.</span><span class="n">mode_id</span>
        <span class="n">_cause</span><span class="o">.</span><span class="n">mechanism_id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">_cause</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Test Functional FMEA Cause &quot;</span>
            <span class="s2">&quot;#</span><span class="si">{0:d}</span><span class="s2"> for Mode ID </span><span class="si">{1:d}</span><span class="s2">&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">i</span><span class="p">,</span> <span class="n">_mode</span><span class="o">.</span><span class="n">mode_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_cause</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="n">_control</span> <span class="o">=</span> <span class="n">RAMSTKControl</span><span class="p">()</span>
        <span class="n">_control</span><span class="o">.</span><span class="n">cause_id</span> <span class="o">=</span> <span class="n">_cause</span><span class="o">.</span><span class="n">cause_id</span>
        <span class="n">_control</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Test Functional FMEA Control #</span><span class="si">{0:d}</span><span class="s2"> for Cause ID </span><span class="si">{1:d}</span><span class="s2">&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">i</span><span class="p">,</span> <span class="n">_cause</span><span class="o">.</span><span class="n">cause_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">_action</span> <span class="o">=</span> <span class="n">RAMSTKAction</span><span class="p">()</span>
        <span class="n">_action</span><span class="o">.</span><span class="n">cause_id</span> <span class="o">=</span> <span class="n">_cause</span><span class="o">.</span><span class="n">cause_id</span>
        <span class="n">_action</span><span class="o">.</span><span class="n">action_recommended</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="s2">&quot;Test Functional FMEA Recommended &quot;</span>
                <span class="s2">&quot;Action #</span><span class="si">{0:d}</span><span class="s2"> for Cause ID </span><span class="si">{1:d}</span><span class="s2">&quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">_cause</span><span class="o">.</span><span class="n">cause_id</span><span class="p">),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_control</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_action</span><span class="p">)</span>
        <span class="n">_dic_rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">_function</span><span class="o">.</span><span class="n">function_id</span>
        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_requirement</span> <span class="o">=</span> <span class="n">RAMSTKRequirement</span><span class="p">()</span>
    <span class="n">_requirement</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_requirement</span><span class="o">.</span><span class="n">requirement_code</span> <span class="o">=</span> <span class="s1">&#39;REL-0001&#39;</span>
    <span class="n">_stakeholder</span> <span class="o">=</span> <span class="n">RAMSTKStakeholder</span><span class="p">()</span>
    <span class="n">_stakeholder</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_stakeholder</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;Test Stakeholder Input&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_requirement</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_stakeholder</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_system</span> <span class="o">=</span> <span class="n">RAMSTKHardware</span><span class="p">()</span>
    <span class="n">_system</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">_system</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Test System&quot;</span>
    <span class="n">_system</span><span class="o">.</span><span class="n">ref_des</span> <span class="o">=</span> <span class="s2">&quot;S1&quot;</span>
    <span class="n">_system</span><span class="o">.</span><span class="n">comp_ref_des</span> <span class="o">=</span> <span class="s2">&quot;S1&quot;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_system</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_reliability</span> <span class="o">=</span> <span class="n">RAMSTKReliability</span><span class="p">()</span>
    <span class="n">_reliability</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_mil_hdbk_217</span> <span class="o">=</span> <span class="n">RAMSTKMilHdbkF</span><span class="p">()</span>
    <span class="n">_mil_hdbk_217</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_nswc</span> <span class="o">=</span> <span class="n">RAMSTKNSWC</span><span class="p">()</span>
    <span class="n">_nswc</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_design_electric</span> <span class="o">=</span> <span class="n">RAMSTKDesignElectric</span><span class="p">()</span>
    <span class="n">_design_electric</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_design_mechanic</span> <span class="o">=</span> <span class="n">RAMSTKDesignMechanic</span><span class="p">()</span>
    <span class="n">_design_mechanic</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_allocation</span> <span class="o">=</span> <span class="n">RAMSTKAllocation</span><span class="p">()</span>
    <span class="n">_allocation</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_allocation</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_allocation</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">_similaritem</span> <span class="o">=</span> <span class="n">RAMSTKSimilarItem</span><span class="p">()</span>
    <span class="n">_similaritem</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_similaritem</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_similaritem</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">_hazardanalysis</span> <span class="o">=</span> <span class="n">RAMSTKHazardAnalysis</span><span class="p">()</span>
    <span class="n">_hazardanalysis</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_hazardanalysis</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_mode</span> <span class="o">=</span> <span class="n">RAMSTKMode</span><span class="p">()</span>
    <span class="n">_mode</span><span class="o">.</span><span class="n">function_id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">_mode</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">_mode</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;System Test Failure Mode&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_reliability</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_mil_hdbk_217</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_nswc</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_design_electric</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_design_mechanic</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_allocation</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_similaritem</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_hazardanalysis</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_mode</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># Build a Hardware FMEA for the system.</span>
    <span class="n">_mechanism</span> <span class="o">=</span> <span class="n">RAMSTKMechanism</span><span class="p">()</span>
    <span class="n">_mechanism</span><span class="o">.</span><span class="n">mode_id</span> <span class="o">=</span> <span class="n">_mode</span><span class="o">.</span><span class="n">mode_id</span>
    <span class="n">_mechanism</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Test Failure Mechanism #1 for Mode ID </span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">_mode</span><span class="o">.</span><span class="n">mode_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_mechanism</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">_cause</span> <span class="o">=</span> <span class="n">RAMSTKCause</span><span class="p">()</span>
    <span class="n">_cause</span><span class="o">.</span><span class="n">mode_id</span> <span class="o">=</span> <span class="n">_mode</span><span class="o">.</span><span class="n">mode_id</span>
    <span class="n">_cause</span><span class="o">.</span><span class="n">mechanism_id</span> <span class="o">=</span> <span class="n">_mechanism</span><span class="o">.</span><span class="n">mechanism_id</span>
    <span class="n">_cause</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Test Failure Cause #1 for Mechanism ID </span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">_mechanism</span><span class="o">.</span><span class="n">mechanism_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_cause</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">_control</span> <span class="o">=</span> <span class="n">RAMSTKControl</span><span class="p">()</span>
    <span class="n">_control</span><span class="o">.</span><span class="n">cause_id</span> <span class="o">=</span> <span class="n">_cause</span><span class="o">.</span><span class="n">cause_id</span>
    <span class="n">_control</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Test FMEA Control #1 for Cause ID </span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">_cause</span><span class="o">.</span><span class="n">cause_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">_action</span> <span class="o">=</span> <span class="n">RAMSTKAction</span><span class="p">()</span>
    <span class="n">_action</span><span class="o">.</span><span class="n">cause_id</span> <span class="o">=</span> <span class="n">_cause</span><span class="o">.</span><span class="n">cause_id</span>
    <span class="n">_action</span><span class="o">.</span><span class="n">action_recommended</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span>
        <span class="s1">&#39;Test FMEA Recommended Action #1 for Cause ID </span><span class="si">{0:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">_cause</span><span class="o">.</span><span class="n">cause_id</span><span class="p">,</span>
        <span class="p">),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Build the PoF for the system.</span>
    <span class="n">_opload</span> <span class="o">=</span> <span class="n">RAMSTKOpLoad</span><span class="p">()</span>
    <span class="n">_opload</span><span class="o">.</span><span class="n">mechanism_id</span> <span class="o">=</span> <span class="n">_mechanism</span><span class="o">.</span><span class="n">mechanism_id</span>
    <span class="n">_opload</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Test Operating Load&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_control</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_action</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_opload</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">_opstress</span> <span class="o">=</span> <span class="n">RAMSTKOpStress</span><span class="p">()</span>
    <span class="n">_opstress</span><span class="o">.</span><span class="n">load_id</span> <span class="o">=</span> <span class="n">_opload</span><span class="o">.</span><span class="n">load_id</span>
    <span class="n">_opstress</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Test Operating Stress&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_opstress</span><span class="p">)</span>
    <span class="n">_testmethod</span> <span class="o">=</span> <span class="n">RAMSTKTestMethod</span><span class="p">()</span>
    <span class="n">_testmethod</span><span class="o">.</span><span class="n">load_id</span> <span class="o">=</span> <span class="n">_opload</span><span class="o">.</span><span class="n">load_id</span>
    <span class="n">_testmethod</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Test Test Method&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_testmethod</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># Create a dictionary to use for creating X_hrdwr and hrdwr_X matrices.</span>
    <span class="c1"># Key is row or column ID; value is row item or column item ID.</span>
    <span class="n">_dic_cols</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]:</span>
        <span class="n">_subsystem</span> <span class="o">=</span> <span class="n">RAMSTKHardware</span><span class="p">()</span>
        <span class="n">_subsystem</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_subsystem</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_subsystem</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
        <span class="n">_subsystem</span><span class="o">.</span><span class="n">ref_des</span> <span class="o">=</span> <span class="s2">&quot;SS</span><span class="si">{0:d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">_subsystem</span><span class="o">.</span><span class="n">comp_ref_des</span> <span class="o">=</span> <span class="s2">&quot;S1:SS</span><span class="si">{0:d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">_subsystem</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Test Sub-System </span><span class="si">{0:d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_subsystem</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="n">_dic_cols</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">_subsystem</span><span class="o">.</span><span class="n">hardware_id</span>

        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]:</span>
                <span class="n">_assembly</span> <span class="o">=</span> <span class="n">RAMSTKHardware</span><span class="p">()</span>
                <span class="n">_assembly</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
                <span class="n">_assembly</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">_assembly</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">_subsystem</span><span class="o">.</span><span class="n">hardware_id</span>
                <span class="n">_assembly</span><span class="o">.</span><span class="n">ref_des</span> <span class="o">=</span> <span class="s2">&quot;A</span><span class="si">{0:d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span>
                <span class="n">_assembly</span><span class="o">.</span><span class="n">comp_ref_des</span> <span class="o">=</span> <span class="s2">&quot;S1:SS1:A</span><span class="si">{0:d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span>
                <span class="n">_assembly</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Test Assembly </span><span class="si">{0:d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span>
                <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_assembly</span><span class="p">)</span>
                <span class="n">_dic_cols</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">_assembly</span><span class="o">.</span><span class="n">hardware_id</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]:</span>
        <span class="n">_allocation</span> <span class="o">=</span> <span class="n">RAMSTKAllocation</span><span class="p">()</span>
        <span class="n">_allocation</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_allocation</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_allocation</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
        <span class="n">_similaritem</span> <span class="o">=</span> <span class="n">RAMSTKSimilarItem</span><span class="p">()</span>
        <span class="n">_similaritem</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_similaritem</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_similaritem</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">_system</span><span class="o">.</span><span class="n">hardware_id</span>
        <span class="n">_hazardanalysis</span> <span class="o">=</span> <span class="n">RAMSTKHazardAnalysis</span><span class="p">()</span>
        <span class="n">_hazardanalysis</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_hazardanalysis</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_reliability</span> <span class="o">=</span> <span class="n">RAMSTKReliability</span><span class="p">()</span>
        <span class="n">_reliability</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_mil_hdbk_217</span> <span class="o">=</span> <span class="n">RAMSTKMilHdbkF</span><span class="p">()</span>
        <span class="n">_mil_hdbk_217</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_nswc</span> <span class="o">=</span> <span class="n">RAMSTKNSWC</span><span class="p">()</span>
        <span class="n">_nswc</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_design_electric</span> <span class="o">=</span> <span class="n">RAMSTKDesignElectric</span><span class="p">()</span>
        <span class="n">_design_electric</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_design_mechanic</span> <span class="o">=</span> <span class="n">RAMSTKDesignMechanic</span><span class="p">()</span>
        <span class="n">_design_mechanic</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_allocation</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_similaritem</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_hazardanalysis</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_reliability</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_mil_hdbk_217</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_nswc</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_design_electric</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_design_mechanic</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]:</span>
        <span class="n">_allocation</span> <span class="o">=</span> <span class="n">RAMSTKAllocation</span><span class="p">()</span>
        <span class="n">_allocation</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_allocation</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_allocation</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">_similaritem</span> <span class="o">=</span> <span class="n">RAMSTKSimilarItem</span><span class="p">()</span>
        <span class="n">_similaritem</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_similaritem</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_similaritem</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">_hazardanalysis</span> <span class="o">=</span> <span class="n">RAMSTKHazardAnalysis</span><span class="p">()</span>
        <span class="n">_hazardanalysis</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_hazardanalysis</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="n">_reliability</span> <span class="o">=</span> <span class="n">RAMSTKReliability</span><span class="p">()</span>
        <span class="n">_reliability</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_mil_hdbk_217</span> <span class="o">=</span> <span class="n">RAMSTKMilHdbkF</span><span class="p">()</span>
        <span class="n">_mil_hdbk_217</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_nswc</span> <span class="o">=</span> <span class="n">RAMSTKNSWC</span><span class="p">()</span>
        <span class="n">_nswc</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_design_electric</span> <span class="o">=</span> <span class="n">RAMSTKDesignElectric</span><span class="p">()</span>
        <span class="n">_design_electric</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">_design_mechanic</span> <span class="o">=</span> <span class="n">RAMSTKDesignMechanic</span><span class="p">()</span>
        <span class="n">_design_mechanic</span><span class="o">.</span><span class="n">hardware_id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_allocation</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_similaritem</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_hazardanalysis</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_reliability</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_mil_hdbk_217</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_nswc</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_design_electric</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_design_mechanic</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">_ckey</span> <span class="ow">in</span> <span class="n">_dic_cols</span><span class="p">:</span>
        <span class="n">_matrix</span> <span class="o">=</span> <span class="n">RAMSTKMatrix</span><span class="p">()</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_id</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_type</span> <span class="o">=</span> <span class="s1">&#39;rqrmnt_hrdwr&#39;</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">column_id</span> <span class="o">=</span> <span class="n">_ckey</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">column_item_id</span> <span class="o">=</span> <span class="n">_dic_cols</span><span class="p">[</span><span class="n">_ckey</span><span class="p">]</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">row_id</span> <span class="o">=</span> <span class="n">_ckey</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">row_item_id</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_matrix</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_rkey</span> <span class="ow">in</span> <span class="n">_dic_rows</span><span class="p">:</span>
            <span class="n">_matrix</span> <span class="o">=</span> <span class="n">RAMSTKMatrix</span><span class="p">()</span>
            <span class="n">_matrix</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
            <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_id</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_type</span> <span class="o">=</span> <span class="s1">&#39;fnctn_hrdwr&#39;</span>
            <span class="n">_matrix</span><span class="o">.</span><span class="n">column_id</span> <span class="o">=</span> <span class="n">_ckey</span>
            <span class="n">_matrix</span><span class="o">.</span><span class="n">column_item_id</span> <span class="o">=</span> <span class="n">_dic_cols</span><span class="p">[</span><span class="n">_ckey</span><span class="p">]</span>
            <span class="n">_matrix</span><span class="o">.</span><span class="n">row_id</span> <span class="o">=</span> <span class="n">_ckey</span>
            <span class="n">_matrix</span><span class="o">.</span><span class="n">row_item_id</span> <span class="o">=</span> <span class="n">_dic_rows</span><span class="p">[</span><span class="n">_rkey</span><span class="p">]</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_matrix</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">_validation</span> <span class="o">=</span> <span class="n">RAMSTKValidation</span><span class="p">()</span>
    <span class="n">_validation</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
    <span class="n">_validation</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;Test Validation&#39;</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_validation</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">_ckey</span> <span class="ow">in</span> <span class="n">_dic_cols</span><span class="p">:</span>
        <span class="n">_matrix</span> <span class="o">=</span> <span class="n">RAMSTKMatrix</span><span class="p">()</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_id</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_type</span> <span class="o">=</span> <span class="s1">&#39;hrdwr_rqrmnt&#39;</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">column_id</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">column_item_id</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">row_id</span> <span class="o">=</span> <span class="n">_ckey</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">row_item_id</span> <span class="o">=</span> <span class="n">_dic_cols</span><span class="p">[</span><span class="n">_ckey</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_matrix</span><span class="p">)</span>
        <span class="n">_matrix</span> <span class="o">=</span> <span class="n">RAMSTKMatrix</span><span class="p">()</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_id</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_type</span> <span class="o">=</span> <span class="s1">&#39;hrdwr_vldtn&#39;</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">column_id</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">column_item_id</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">row_id</span> <span class="o">=</span> <span class="n">_ckey</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">row_item_id</span> <span class="o">=</span> <span class="n">_dic_cols</span><span class="p">[</span><span class="n">_ckey</span><span class="p">]</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_matrix</span><span class="p">)</span>
        <span class="n">_matrix</span> <span class="o">=</span> <span class="n">RAMSTKMatrix</span><span class="p">()</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">revision_id</span> <span class="o">=</span> <span class="n">_revision</span><span class="o">.</span><span class="n">revision_id</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_id</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">matrix_type</span> <span class="o">=</span> <span class="s1">&#39;vldtn_hrdwr&#39;</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">column_id</span> <span class="o">=</span> <span class="n">_ckey</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">column_item_id</span> <span class="o">=</span> <span class="n">_dic_cols</span><span class="p">[</span><span class="n">_ckey</span><span class="p">]</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">row_id</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_matrix</span><span class="o">.</span><span class="n">row_item_id</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_matrix</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">return</span> <span class="kc">False</span></div>


<span class="c1"># pylint: disable=too-many-locals</span>
<div class="viewcode-block" id="do_make_programdb_tables"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.do_make_programdb_tables">[docs]</a><span class="k">def</span> <span class="nf">do_make_programdb_tables</span><span class="p">(</span><span class="n">engine</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make all the tables in the RAMSTK Program database.&quot;&quot;&quot;</span>
    <span class="n">RAMSTKAction</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKAllocation</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKCause</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKControl</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKDesignElectric</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKDesignMechanic</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKEnvironment</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKFailureDefinition</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKFunction</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKGrowthTest</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKHardware</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKHazardAnalysis</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKIncident</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKIncidentAction</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKIncidentDetail</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKLoadHistory</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKMatrix</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKMechanism</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKMilHdbkF</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKMission</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKMissionPhase</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKMode</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKNSWC</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKOpLoad</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKOpStress</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKProgramInfo</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKProgramStatus</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKReliability</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKRequirement</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKRevision</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKSimilarItem</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKSoftware</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKSoftwareDevelopment</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKSoftwareReview</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKSoftwareTest</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKStakeholder</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKSurvival</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKSurvivalData</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKTest</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKTestMethod</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKUnits</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKValidation</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span></div>


<div class="viewcode-block" id="do_make_commondb_tables"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.do_make_commondb_tables">[docs]</a><span class="k">def</span> <span class="nf">do_make_commondb_tables</span><span class="p">(</span><span class="n">engine</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make all the tables in the RAMSTK Common database.&quot;&quot;&quot;</span>
    <span class="n">RAMSTKSiteInfo</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKCategory</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKCondition</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKFailureMode</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKGroup</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKHazards</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKLoadHistory</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKManufacturer</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKMeasurement</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKMethod</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKModel</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKRPN</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKStakeholders</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKStatus</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKSubCategory</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKType</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">RAMSTKUser</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span></div>


<div class="viewcode-block" id="DAO"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO">[docs]</a><span class="k">class</span> <span class="nc">DAO</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;This is the data access controller class.&quot;&quot;&quot;</span>

    <span class="n">RAMSTK_SESSION</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>

    <span class="c1"># Define public class scalar attributes.</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">session</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">database</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize an instance of the DAO controller.&quot;&quot;&quot;</span>

        <span class="c1"># Initialize private dictionary instance attributes.</span>

        <span class="c1"># Initialize private list instance attributes.</span>

        <span class="c1"># Initialize private scalar instance attributes.</span>

        <span class="c1"># Initialize public dictionary instance attributes.</span>

        <span class="c1"># Initialize public list instance attributes.</span>

        <span class="c1"># Initialize public scalar instance attributes.</span>

<div class="viewcode-block" id="DAO.db_connect"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO.db_connect">[docs]</a>    <span class="k">def</span> <span class="nf">db_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">database</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Connect to the database using settings from the configuration file.</span>

<span class="sd">        :param str database: the absolute path to the database to connect to.</span>
<span class="sd">        :return: False if successful, True if an error occurs.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">RAMSTK_SESSION</span><span class="p">(</span>
            <span class="n">bind</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span>
            <span class="n">autoflush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">autocommit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DAO.db_close"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO.db_close">[docs]</a>    <span class="k">def</span> <span class="nf">db_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the current session.</span>

<span class="sd">        :return: False if successful, True if an error occurs.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RAMSTK_SESSION</span><span class="o">.</span><span class="n">close_all</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">engine</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DAO._db_table_create"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO._db_table_create">[docs]</a>    <span class="k">def</span> <span class="nf">_db_table_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the passed table exists and create it if not.</span>

<span class="sd">        :param table: the table to check for.</span>
<span class="sd">        :return: False if successful or True if an error is encountered.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_return</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">dialect</span><span class="o">.</span><span class="n">has_table</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">table</span><span class="p">),</span>
        <span class="p">):</span>
            <span class="n">table</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_return</span></div>

<div class="viewcode-block" id="DAO.db_create_common"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO.db_create_common">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">db_create_common</span><span class="p">(</span><span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new RAMSTK Common database.</span>

<span class="sd">        :param str database: the RFC1738 URL path to the database to connect</span>
<span class="sd">                             with.</span>
<span class="sd">        :return: False if successful or True if an error occurs.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_test</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">do_create_common_db</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="n">_test</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span>
                <span class="ne">IOError</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">SQLAlchemyError</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">DBAPIError</span><span class="p">,</span>
                <span class="n">exc</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">_error</span><span class="p">:</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">ArgumentError</span><span class="p">:</span>  <span class="c1"># pylint: disable=undefined-variable # noqa</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bad common database URI: </span><span class="si">{0:s}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">database</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="DAO.db_create_program"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO.db_create_program">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">db_create_program</span><span class="p">(</span><span class="n">database</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new RAMSTK Program database.</span>

<span class="sd">        :param str database: the RFC1738 URL path to the database to connect</span>
<span class="sd">                             with.</span>
<span class="sd">        :return: False if successful or True if an error occurs.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_return</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">do_create_program_db</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;IOError&quot;</span><span class="p">)</span>
            <span class="n">_return</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">exc</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">:</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;OperationalError&quot;</span><span class="p">)</span>
            <span class="n">_return</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">exc</span><span class="o">.</span><span class="n">DBAPIError</span><span class="p">:</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DBAPIError&quot;</span><span class="p">)</span>
            <span class="n">_return</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">exc</span><span class="o">.</span><span class="n">SQLAlchemyError</span><span class="p">:</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SQLAlchemyError&quot;</span><span class="p">)</span>
            <span class="n">_return</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">ArgumentError</span><span class="p">:</span>  <span class="c1"># pylint: disable=undefined-variable  # noqa</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bad program database URI: </span><span class="si">{0:s}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">database</span><span class="p">))</span>
            <span class="n">_return</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">_return</span></div>

<div class="viewcode-block" id="DAO.db_add"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO.db_add">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">db_add</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new item to the RAMSTK Program database.</span>

<span class="sd">        :param item: the object to add to the RAMSTK Program database.</span>
<span class="sd">        :param session: the SQLAlchemy scoped_session instance used to</span>
<span class="sd">                        communicate with the RAMSTK Program database.</span>
<span class="sd">        :type session: :class:`sqlalchemy.orm.scoped_session`</span>
<span class="sd">        :return: (_error_code, _msg); the error code and associated error</span>
<span class="sd">                                      message.</span>
<span class="sd">        :rtype: (int, str)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_msg</span> <span class="o">=</span> <span class="s2">&quot;RAMSTK SUCCESS: Adding one or more items to the RAMSTK &quot;</span> \
               <span class="s2">&quot;Program database.&quot;</span>

        <span class="k">for</span> <span class="n">_item</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_item</span><span class="p">)</span>
                <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">SQLAlchemyError</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">DBAPIError</span><span class="p">)</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                <span class="n">_error</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
                <span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
                <span class="k">if</span> <span class="s1">&#39;Could not locate a bind&#39;</span> <span class="ow">in</span> <span class="n">_error</span><span class="p">:</span>
                    <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">2</span>
                    <span class="n">_msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s1">&#39;RAMSTK ERROR: No database open when attempting &#39;</span>
                        <span class="s1">&#39;to insert record.&#39;</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="p">(</span><span class="s1">&#39;PRIMARY KEY must be unique&#39;</span> <span class="ow">in</span> <span class="n">_error</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="s1">&#39;UNIQUE constraint failed:&#39;</span> <span class="ow">in</span> <span class="n">_error</span>
                <span class="p">):</span>
                    <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">3</span>
                    <span class="n">_msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s1">&#39;RAMSTK ERROR: Primary key error: &#39;</span>
                        <span class="s1">&#39;</span><span class="si">{0:s}</span><span class="s1">&#39;</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_error</span><span class="p">)</span>
                <span class="k">elif</span> <span class="s1">&#39;Date type only accepts Python date objects as input&#39;</span> <span class="ow">in</span> <span class="n">_error</span><span class="p">:</span>
                    <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">4</span>
                    <span class="n">_msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s1">&#39;RAMSTK ERROR: Date field did not contain Python &#39;</span>
                        <span class="s1">&#39;date object: </span><span class="si">{0:s}</span><span class="s1">&#39;</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_error</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
                    <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">_msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s1">&#39;RAMSTK ERROR: Adding one or more items to the RAMSTK &#39;</span>
                        <span class="s1">&#39;Program database.&#39;</span>
                    <span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">_error</span><span class="p">:</span>
                <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">4</span>
                <span class="n">_msg</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s1">&#39;RAMSTK ERROR: Date field did not contain Python &#39;</span>
                    <span class="s1">&#39;date object: </span><span class="si">{0:s}</span><span class="s1">&#39;</span>
                <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_error</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_error_code</span><span class="p">,</span> <span class="n">_msg</span></div>

<div class="viewcode-block" id="DAO.db_update"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO.db_update">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">db_update</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the RAMSTK Program database with any pending changes.</span>

<span class="sd">        :param session: the SQLAlchemy scoped_session instance used to</span>
<span class="sd">                        communicate with the RAMSTK Program database.</span>
<span class="sd">        :type session: :py:class:`sqlalchemy.orm.scoped_session`</span>
<span class="sd">        :return: (_error_code, _Msg); the error code and associated error</span>
<span class="sd">                                      message.</span>
<span class="sd">        :rtype: (int, str)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_msg</span> <span class="o">=</span> <span class="s2">&quot;RAMSTK SUCCESS: Updating the RAMSTK Program database.&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">SQLAlchemyError</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">DBAPIError</span><span class="p">)</span> <span class="k">as</span> <span class="n">_error</span><span class="p">:</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">_msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;RAMSTK ERROR: Updating the RAMSTK Program database failed &quot;</span>
                <span class="s2">&quot;with error: </span><span class="si">{0:s}</span><span class="s2">.&quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_error</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_error_code</span><span class="p">,</span> <span class="n">_msg</span></div>

<div class="viewcode-block" id="DAO.db_delete"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO.db_delete">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">db_delete</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a record from the RAMSTK Program database.</span>

<span class="sd">        :param item: the item to remove from the RAMSTK Program database.</span>
<span class="sd">        :type item: Object()</span>
<span class="sd">        :param session: the SQLAlchemy scoped_session instance used to</span>
<span class="sd">                        communicate with the RAMSTK Program database.</span>
<span class="sd">        :type session: :py:class:`sqlalchemy.orm.scoped_session`</span>
<span class="sd">        :return: (_error_code, _Msg); the error code and associated error</span>
<span class="sd">                                      message.</span>
<span class="sd">        :rtype: (int, str)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_msg</span> <span class="o">=</span> <span class="s2">&quot;RAMSTK SUCCESS: Deleting an item from the RAMSTK Program database.&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">SQLAlchemyError</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">DBAPIError</span><span class="p">)</span> <span class="k">as</span> <span class="n">_error</span><span class="p">:</span>
            <span class="c1"># ISSUE: See issue #238 at https://github.com/ReliaQualAssociates/ramstk/issues/238</span>
            <span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="n">_error_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">_msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;RAMSTK ERROR: Deleting an item from the RAMSTK Program &quot;</span>
                <span class="s2">&quot;database with error: </span><span class="si">{0:s}</span><span class="s2">.&quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_error</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">_error_code</span><span class="p">,</span> <span class="n">_msg</span></div>

<div class="viewcode-block" id="DAO.db_query"><a class="viewcode-back" href="../../../api/dao.html#ramstk.dao.DAO.DAO.db_query">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">db_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute an SQL query against the connected database.</span>

<span class="sd">        :param str query: the SQL query string to execute</span>
<span class="sd">        :param session: the SQLAlchemy scoped_session instance used to</span>
<span class="sd">                        communicate with the RAMSTK Program database.</span>
<span class="sd">        :type session: :class:`sqlalchemy.orm.scoped_session`</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></div>

    <span class="c1"># TODO: Implement a DAO.db_last_id() method to retrieve the value of the last ID from the database.</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">db_last_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the value of the last ID column from a table in the database.</span>

<span class="sd">        :return: _last_id; the last value of the ID column.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_last_id</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">_last_id</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007 - 2019, Doyle Rowland.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>